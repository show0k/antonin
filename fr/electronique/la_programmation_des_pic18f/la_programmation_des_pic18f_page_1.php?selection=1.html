<!DOCTYPE html>
<html lang="fr">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>La programmation des PIC18F - Cr&eacute;er un projet sous MPLAB</title>
<meta name="description" content="La programmation des PIC18F - Cr&eacute;er un projet sous MPLAB." />
<meta name="keywords" content="atrylec electronique schema montage realisation microcontroleur entree sortie programmation code source langage c pic18f4550 pic 18f4550 mplab tutoriel exemple cours creer projet configurer horloge" />
<link rel="stylesheet" media="screen" type="text/css" title="Style 1" href="../../../elements/allures/style_1.css">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-42331281-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body>
<div id="page">
<div id="haut">
<header id="Haut_de_page">
<div id="principale">
<p class="titre_principal_haut">
<a href="../../../index.php.html"><img style="width: 150px;" alt="Affichage_Atrylec_com" src="../../../images/Affichage_Atrylec_com.png" /><span class="invisible">Atrylec</span></a></p>
<p class="sous-titre_haut">Vous n'&ecirc;tes pas seuls dans l'Univers !</p>
</div>
<div id="additionnelle">
</div>
</header>
<nav>
<ul id="navigation">
<li><a href="../../../index.php.html" title="Accueil">Accueil</a></li>
<li><a class="choisi" href="../index.php.html" title="Electronique">Electronique</a></li>
<li><a href="../../radio/index.php%3Fnumero=0.html" title="Radio">Radio</a></li>
<li><a href="../../origami/index.php.html" title="Origami">Origami</a></li>
<li><a href="../../photographies/index.php%3Fnumero=0.html" title="Photographies">Photographies</a></li>
<li><a href="../../le_grenier/index.php.html" title="Le grenier">Le grenier</a></li>
<li><a href="../../contact.php.html" title="ContaCT">ContaCT</a></li>
</ul>
</nav>
</div>
<section>
<div id="titre">
<div id="titre_gauche">
</div>
<div id="titre_image">
<img style="width: 100px; height: 100px;" alt="Transistor_100" src="../../../images/Transistor_100.png">
</div>
<div id="titre_texte">
<p>[</p><h1>La programmation des PIC18F - Page 1</h1><p>]</p>
</div>
<div id="titre_droite">
</div>
</div>
<div style="position: relative; top: 72px; left: 502px;">
<i>Sp&eacute;cial ZanX' &agrave; &laquo;&nbsp;NonoxX&nbsp;&raquo;</i> !<br />
</div>
<div>
<p id="introduction">La programmation des PIC18F - Cr&eacute;er un projet sous MPLAB.</p>
</div>
<p>
<a id="Liste_de_depart"></a>
</p>
<div>
<div class="menu_article">
<ul class="menu_article_principal">
<li><a href="la_programmation_des_pic18f_page_1.php.html">Mises en places</a></li>
<li><ul>
<li><a class="choisi" href="la_programmation_des_pic18f_page_1.php.html">Cr&eacute;er un projet sous MPLAB</a></li>
<li><a href="la_programmation_des_pic18f_page_2.php.html">Configurer l'horloge sur le PIC18F4550</a></li>
<li><a href="la_programmation_des_pic18f_page_3.php.html">Les ports d'entr&eacute;es-sorties du PIC18F4550</a></li>
</ul></li>
</ul>
<ul class="menu_article_secondaire">
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_1-0-0">1) T&eacute;l&eacute;chargements et installations</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_2-0-0">2) Configuration de MPLAB</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_3-0-0">3) La cr&eacute;ation d'un projet</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_4-0-0">4) Le fichier de programme principal</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_5-0-0">5) La compilation et le d&eacute;bogage du composant</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_6-0-0">6) La programmation en mode production</a></li>
</ul>
</div>
</div>
<div>
<span style="font-size: 42px; color: rgb(209, 1, 38);"><b>&uarr;</b></span> <a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Haut_de_page">Je veux remonter !</a>&nbsp;|&nbsp;<a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Liste_de_depart">Liste</a>
</div>
<a id="Endroit_1-0-0"></a>
<h2>1) T&eacute;l&eacute;chargements et installations</h2>
<p>Afin de programmer un PIC, vous aurez besoin de deux programmes sur
votre PC. Un environnement de d&eacute;veloppement, c'est
&agrave; dire le logiciel dans lequel vous &eacute;crirez votre
programme, qui dispose entre autres d'un d&eacute;bogueur, et un
compilateur. Bien qu'on soit totalement libre d'en choisir d'autre,
MPLAB est l'environnement de d&eacute;veloppement
propos&eacute; par Microchip, constructeur des PICs, il y est donc
parfaitement adapt&eacute;.<br />
Apr&egrave;s vous y &ecirc;tre inscrit, vous pourrez en
t&eacute;l&eacute;charger gratuitement la derni&egrave;re
version sur le site de Microchip&nbsp;:</p>
<p><img alt="LIEN_EXTERNE" src="../../../images/LIEN_EXTERNE.png" />&nbsp;<a href="http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&amp;nodeId=1406&amp;dDocName=en019469&amp;part=SW007002" title="Ouvrir le lien &laquo;&nbsp;http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&amp;nodeId=1406&amp;dDocName=en019469&amp;part=SW007002&nbsp;&raquo; dans une nouvelle fen&ecirc;tre, ou dans un nouvel onglet" target="_blank">http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&amp;nodeId=1406&amp;dDocName=en019469&amp;part=SW007002</a></p>
<p></p>
<p>Lancez l'installation, et suivez l'assistant jusqu'au bout. A la fin de
l'installation, l'assistant vous propose d'installer Hi-Tech C
Compiler. Il s'agit d'un compilateur pour les PIC10/12/16, installez-le
si vous avez l'intention de programmer des PICs de l'une de ces gammes.<br />
Le compilateur, justement, c'est le programme qui fera la traduction du
programme que vous avez &eacute;crit en C en un langage
(assembleur) que le microcontr&ocirc;leur saura
interpr&eacute;ter. Dans le cas de la programmation des PIC18,
Microchip propose un compilateur nomm&eacute; C18. Microchip ne
propose pas de compilateur pour les PIC10/12/16 car ils sont
destin&eacute;s &agrave; &ecirc;tre programm&eacute;
directement en langage assembleur. Vous pourrez trouver une version
gratuite (lite) de C18 et une version d'&eacute;valuation
(limit&eacute;e en temps) de la version compl&egrave;te sur le
site de Microchip&nbsp;:</p>
<p><img alt="LIEN_EXTERNE" src="../../../images/LIEN_EXTERNE.png" />&nbsp;<a href="http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&amp;nodeId=1406&amp;dDocName=en010014" title="Ouvrir le lien &laquo;&nbsp;http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&amp;nodeId=1406&amp;dDocName=en010014&nbsp;&raquo; dans une nouvelle fen&ecirc;tre, ou dans un nouvel onglet" target="_blank">http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&amp;nodeId=1406&amp;dDocName=en010</a></p>
<p></p>
<div>
<span style="font-size: 42px; color: rgb(209, 1, 38);"><b>&uarr;</b></span> <a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Haut_de_page">Je veux remonter !</a>&nbsp;|&nbsp;<a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Liste_de_depart">Liste</a>
</div>
<a id="Endroit_2-0-0"></a>
<h2>2) Configuration de MPLAB</h2>
<p>D&eacute;marrez le &laquo;&nbsp;Project Wizard&nbsp;&raquo; &agrave; partir du menu &laquo;&nbsp;Project&nbsp;&raquo; et suivez-le. La premi&egrave;re chose que vous devez renseigner est le composant que vous allez utiliser.
<p>Ensuite, s&eacute;lectionner le compilateur qui vous convient. Dans
le cadre de ce cours, c'est C18 que nous allons utiliser.</p>
<a href="../../../images/Capture_MPLAB_2.jpg">
<img alt="Capture_MPLAB_2" src="../../../images/Capture_MPLAB_2.jpg">
</a>
<p>La prochaine &eacute;tape est de choisir un r&eacute;pertoire pour votre projet. C'est dans ce r&eacute;pertoire que tous<br />
les fichiers de votre projet seront contenus. Je vous recommande vivement de cr&eacute;er un r&eacute;pertoire<br />
distinct pour chaque projet. De mani&egrave;re g&eacute;n&eacute;rale, &eacute;vitez les caract&egrave;res sp&eacute;ciaux ou accentu&eacute;s dans<br />
les noms de fichiers et r&eacute;pertoires. Placez-vous dans le r&eacute;pertoire que vous avez choisis et trouvez un<br />
nom au fichier de votre projet (*.mcp) qui vous permettra de le retrouver facilement. La derni&egrave;re<br />
&eacute;tape est d'ajouter les fichiers d&eacute;j&agrave; existants &agrave; votre projet. Cela peut &ecirc;tre utile si vous utilisez des<br />
biblioth&egrave;ques de fonctions d&eacute;j&agrave; &eacute;crites.</p>
<div>
<span style="font-size: 42px; color: rgb(209, 1, 38);"><b>&uarr;</b></span> <a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Haut_de_page">Je veux remonter !</a>&nbsp;|&nbsp;<a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Liste_de_depart">Liste</a>
</div>
<a id="Endroit_3-0-0"></a>
<h2>3) La cr&eacute;ation d'un projet</h2>
<p>D&eacute;marrez le &laquo;&nbsp;Project Wizard&nbsp;&raquo;
&agrave; partir du menu &laquo;&nbsp;Project&nbsp;&raquo; et
suivez-le. La premi&egrave;re chose que vous devez renseigner est
le composant que vous allez utiliser.<br />
Ensuite, s&eacute;lectionner le compilateur qui vous convient. Dans
le cadre de ce cours, c'est C18 que nous allons utiliser.<br />
La prochaine &eacute;tape est de choisir un r&eacute;pertoire
pour votre projet. C'est dans ce r&eacute;pertoire que tous<br />
les fichiers de votre projet seront contenus. Je vous recommande
vivement de cr&eacute;er un r&eacute;pertoire<br />
distinct pour chaque projet. De mani&egrave;re
g&eacute;n&eacute;rale, &eacute;vitez les
caract&egrave;res sp&eacute;ciaux ou accentu&eacute;s dans<br />
les noms de fichiers et r&eacute;pertoires. Placez-vous dans le
r&eacute;pertoire que vous avez choisis et trouvez un<br />
nom au fichier de votre projet (*.mcp) qui vous permettra de le
retrouver facilement. La derni&egrave;re<br />
&eacute;tape est d'ajouter les fichiers d&eacute;j&agrave;
existants &agrave; votre projet. Cela peut &ecirc;tre utile si
vous utilisez des<br />
biblioth&egrave;ques de fonctions d&eacute;j&agrave;
&eacute;crites.</p>
<div>
<span style="font-size: 42px; color: rgb(209, 1, 38);"><b>&uarr;</b></span> <a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Haut_de_page">Je veux remonter !</a>&nbsp;|&nbsp;<a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Liste_de_depart">Liste</a>
</div>
<a id="Endroit_4-0-0"></a>
<h2>4) Le fichier de programme principal</h2>
<p>Il va falloir ajouter un premier fichier source &agrave; votre
projet. Ce fichier contiendra la fonction &laquo;&nbsp;main&nbsp;&raquo;,<br />
fonction principale de tout programme en C. Allez dans le menu
&laquo;&nbsp;File&nbsp;&raquo; et cliquez sur &laquo;&nbsp;Add New File<br />
to Project...&nbsp;&raquo;, choisissez un nom pour votre fichier avec
une extension &laquo;&nbsp;*.c&nbsp;&raquo;. En
g&eacute;n&eacute;ral, on nomme<br />
son ficher &laquo;&nbsp;main.c&nbsp;&raquo; ou avec le m&ecirc;me nom
que le projet, mais ce n'est pas une obligation.<br />
Dans ce fichier principal, la premi&egrave;re chose &agrave;
faire est d'inclure le fichier contenant les d&eacute;finitions des<br />
registres de votre composant. Son nom est le nom du composant, en
enlevant les deux lettres &laquo;&nbsp;IC&nbsp;&raquo;,<br />
avec l&rsquo;extension &laquo;&nbsp;*.h&nbsp;&raquo;. Par exemple
pour le PIC18F4553, il faut inclure le fichier &laquo;&nbsp;p18F4553.h
&raquo;.<br />
Puis, il faut cr&eacute;er une fonction &laquo;&nbsp;main
&raquo; ne retournant rien et sans param&egrave;tre. Au final,
votre fichier<br />
principal contient ces quelques lignes&nbsp;:</p>
<p></p>
<p>#include &lt;p18f4553.h&gt;</p>
<p>void main(void)</p>
<p>{</p>
<p></p>
<p>}</p>
<p></p>
<p>Il ne vous reste plus qu'&agrave; &eacute;crire votre programme.</p>
<p></p>
<div>
<span style="font-size: 42px; color: rgb(209, 1, 38);"><b>&uarr;</b></span> <a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Haut_de_page">Je veux remonter !</a>&nbsp;|&nbsp;<a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Liste_de_depart">Liste</a>
</div>
<a id="Endroit_5-0-0"></a>
<h2>5) La compilation et le d&eacute;bogage du composant</h2>
<p></p>
<p>Dans un premier temps il vous faut choisir votre interface de programmation. Dans le menu<br />
&laquo;&nbsp;Debugger&nbsp;&raquo;, choisissez votre d&eacute;bogueur. Si vous n'en avez pas et souhaitez en acqu&eacute;rir un, je vous<br />
conseille l'achat d'un Pickit 3, c'est un programmateur/d&eacute;bogueur relativement &eacute;conomique (45&euro;)<br />
qui permet de programmer la plupart des PICs et couvre amplement la majorit&eacute; des besoins.</p>
<p>Configurez votre environnement en mode &laquo;&nbsp;Debug&nbsp;&raquo; &agrave; l'aide de la petite liste<br />
d&eacute;roulante en haut de la fen&ecirc;tre de MPLAB.<br />
Ensuite compilez votre programme en appuyant sur le bouton &laquo;&nbsp;Build All&nbsp;&raquo;.</p>
<p>Si tout va bien, vous devriez voir du texte d&eacute;filer dans la fen&ecirc;tre &laquo;&nbsp;Output&nbsp;&raquo;, jusqu'&agrave; y voir inscrit<br />
&laquo;&nbsp;BUILD SUCCEEDED&nbsp;&raquo;. Sinon, des messages d'erreur s'y inscriront en rouge, et g&eacute;n&eacute;ralement, il<br />
faudra revoir votre code, vous avez fait des erreurs de programmation.</p>
<p>Programmez votre composant &agrave; l'aide du bouton &laquo;&nbsp;Program&nbsp;&raquo;. Une fois la<br />
programmation effectu&eacute;e, vous pouvez lancer votre programme en<br />
appuyant sur le bouton &laquo;&nbsp;Play&nbsp;&raquo; vert, l'arr&ecirc;ter &agrave; votre guise avec le bouton &laquo;&nbsp;Pause&nbsp;&raquo;, l'ex&eacute;cuter pas &agrave; pas, provoquer un &laquo;&nbsp;Reset&nbsp;&raquo;, visualiser l'&eacute;tat des registres &agrave; tout instant. C'est tr&egrave;s pratique pour v&eacute;rifier le fonctionnement de votre programme, ou comprendre pourquoi il ne fonctionne pas lorsque c'est le cas.</p>
<p></p>
<a href="../../../images/Capture_MPLAB_4.jpg">
<img alt="Capture_MPLAB_4" src="../../../images/Capture_MPLAB_4.jpg">
</a>
<div>
<span style="font-size: 42px; color: rgb(209, 1, 38);"><b>&uarr;</b></span> <a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Haut_de_page">Je veux remonter !</a>&nbsp;|&nbsp;<a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Liste_de_depart">Liste</a>
</div>
<a id="Endroit_6-0-0"></a>
<h2>6) La programmation en mode production</h2>
<p>Il existe un autre type de programmation, le mode production ou
&laquo;&nbsp;Release&nbsp;&raquo;. La diff&eacute;rence avec le mode
d&eacute;bogueur est qu'en mode production, vous ne pouvez pas
utiliser les fonctions du d&eacute;bogueur. On utilise ce mode
lorsque l'on veut programmer le composant pour son
impl&eacute;mentation finale.<br />
Pour acc&eacute;der &agrave; ce mode, il suffit de configurer
l'environnement en mode &laquo;&nbsp;Release&nbsp;&raquo; dans la petite
liste d&eacute;roulante en haut de la fen&ecirc;tre de MPLAB.
Ensuite compilez votre programme et programmez votre composant de la
m&ecirc;me mani&egrave;re qu'en mode d&eacute;bogage.</p>
<div>
<div class="menu_article">
<ul class="menu_article_principal">
<li><a href="la_programmation_des_pic18f_page_1.php.html">Mises en places</a></li>
<li><ul>
<li><a class="choisi" href="la_programmation_des_pic18f_page_1.php.html">Cr&eacute;er un projet sous MPLAB</a></li>
<li><a href="la_programmation_des_pic18f_page_2.php.html">Configurer l'horloge sur le PIC18F4550</a></li>
<li><a href="la_programmation_des_pic18f_page_3.php.html">Les ports d'entr&eacute;es-sorties du PIC18F4550</a></li>
</ul></li>
</ul>
<ul class="menu_article_secondaire">
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_1-0-0">1) T&eacute;l&eacute;chargements et installations</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_2-0-0">2) Configuration de MPLAB</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_3-0-0">3) La cr&eacute;ation d'un projet</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_4-0-0">4) Le fichier de programme principal</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_5-0-0">5) La compilation et le d&eacute;bogage du composant</a></li>
<li><a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Endroit_6-0-0">6) La programmation en mode production</a></li>
</ul>
</div>
</div>
<div class="commentaires"><a id="Endroits_des_commentaires"></a><p class="sous-titre_commentaires">Commentaires (0)</p><p class="sous-titre_ajouts">Ajouter un commentaire</p>
<form id="contact" method="post" action="http://atrylec.com/elements/allures/commentaires/verification.php">
<fieldset>
<legend>
Votre pseudo&nbsp;: 
</legend>
<p>
<label for="pseudo">
Pseudo&nbsp;: 
</label>
<input type="text" id="pseudo" name="pseudo" tabindex="1" required="required">
</p>
</fieldset>
<fieldset>
<legend>
Votre commentaire&nbsp;: 
</legend>
<p>
<label for="commentaire">
Commentaire&nbsp;: 
</label>
<textarea id="commentaire" name="commentaire" tabindex="2" cols="50" rows="2" required="required">
</textarea>
</p>
</fieldset>
<div class="bouton_validation_commentaire">
<input type="submit" name="Poster" value="Poster" />
</div>
</form>
</div><div>
<span style="font-size: 42px; color: rgb(209, 1, 38);"><b>&uarr;</b></span> <a href="la_programmation_des_pic18f_page_1.php%3Fselection=1.html#Haut_de_page">Je veux remonter !</a>
</div>
</section>
<footer>
<div class="liens">
<ul>
<li><a href="../../contact.php.html">ContaCT</a></li>
</ul>
</div>
<div id="choix_style">
<div class="presentation">Ravaler la fa&ccedil;ade&nbsp;:</div>
<div class="choix choix_bleu_choisi">&nbsp;</div><a href="la_programmation_des_pic18f_page_1.php%3Fselection=2.html" title="Style 2"><div class="choix choix_rouge">&nbsp;</div></a><a href="la_programmation_des_pic18f_page_1.php%3Fselection=3.html" title="Style 3"><div class="choix choix_orange">&nbsp;</div></a></div>
<div class="remarques">
<p>Il ne faut pas dire&nbsp;: &laquo;&nbsp;Un ouvrage d'art autrichien
&nbsp;&raquo;, mais&nbsp;: &laquo;&nbsp;Un pont de Vienne
&nbsp;&raquo;.</p>
</div>
<div class="visites">
<img style="width: 15px; height: 15px;" alt="6_30" src="../../../images/6_30.png">   <img style="width: 15px; height: 15px;" alt="5_30" src="../../../images/5_30.png">   <img style="width: 15px; height: 15px;" alt="0_30" src="../../../images/0_30.png">   <img style="width: 15px; height: 15px;" alt="9_30" src="../../../images/9_30.png">   <img style="width: 15px; height: 15px;" alt="9_30" src="../../../images/9_30.png">   </div>
</footer>
</div>
</body>
</html>
